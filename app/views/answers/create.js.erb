document
    .querySelector('.answer_errors')
    .innerHTML = '<%= render 'shared/errors', resource: @answer %>'

<% if @answer.persisted? %>
  document
      .querySelector('.answers')
      .insertAdjacentHTML('beforeend', '<%= j render @answer, answer_class: @answer.best? ? 'best_answer' : nil %>')
<% end %>

document.querySelector('.new-answer #answer_body').value = ''

const links = document.querySelector('.new-answer #answer_links .nested-fields')

if (links) {
  links.forEach(elem => {
    elem.parentNode.removeChild(elem);
  });
}
document.dispatchEvent(new Event('gistRenderer'))


